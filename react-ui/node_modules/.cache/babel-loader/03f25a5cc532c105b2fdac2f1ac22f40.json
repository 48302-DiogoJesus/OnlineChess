{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jesus\\\\Desktop\\\\PG\\\\Personal\\\\1-Web\\\\TS\\\\OnlineChess\\\\onlinechess\\\\src\\\\components\\\\ChessBoard\\\\Board\\\\Board.tsx\",\n    _s = $RefreshSig$();\n\nimport './board.css';\nimport Tile, { TileColor } from '../Tile/Tile';\nimport { BoardObject, stringToBoard } from '../../../domain/board';\nimport { Position } from '../../../domain/position';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initSelectedTile = {\n  tile: null\n};\nconst initHighlightedTile = {\n  tile: null\n};\nexport default function Board(props) {\n  _s();\n\n  const [selectedTile, setSelectedTile] = useState(initSelectedTile);\n  const [highlightedTile, setHighlightedTile] = useState(initHighlightedTile);\n  /** STORE STATE FOR CLICK_PHASE\r\n   * 1 - NOT_SELECTED\r\n   * 2 - SELECTED \r\n   * */\n\n  const board = getBoardFromProps();\n\n  function getBoardFromProps() {\n    const boardAsString = props.boardString;\n    if (boardAsString == undefined) return new BoardObject();\n\n    try {\n      const convertedBoard = stringToBoard(boardAsString);\n      return convertedBoard;\n    } catch (e) {\n      const err = e;\n      err.message = `[DEBUG] Invalid Board: ${boardAsString.length} => ${boardAsString}\\nOriginal Error: ${err.message}`;\n      props.onError(err);\n    }\n\n    return new BoardObject();\n  }\n\n  const handleTileClick = (row, col, piece) => {\n    console.log(`Clicked on ${col}:${row} | ${piece}`);\n  };\n\n  const calcTileColor = (row, col) => (col + row) % 2 === 0 ? TileColor.LIGHT : TileColor.DARK;\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: board === null || board === void 0 ? void 0 : board.board.map((row, rowIdx) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"board-row\",\n          children: row.map((piece, colIdx) => {\n            return /*#__PURE__*/_jsxDEV(Tile, {\n              selected: false,\n              highlighted: false,\n              column: colIdx,\n              row: rowIdx,\n              onTileClick: () => handleTileClick(rowIdx, colIdx, piece),\n              color: calcTileColor(rowIdx, colIdx),\n              piece: board.getPieceAt(Position(colIdx, rowIdx))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 23\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Board, \"4dZpERYgznNgKKenl4iklshoRGY=\");\n\n_c = Board;\n\nvar _c;\n\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"sources":["C:/Users/jesus/Desktop/PG/Personal/1-Web/TS/OnlineChess/onlinechess/src/components/ChessBoard/Board/Board.tsx"],"names":["Tile","TileColor","BoardObject","stringToBoard","Position","useState","initSelectedTile","tile","initHighlightedTile","Board","props","selectedTile","setSelectedTile","highlightedTile","setHighlightedTile","board","getBoardFromProps","boardAsString","boardString","undefined","convertedBoard","e","err","message","length","onError","handleTileClick","row","col","piece","console","log","calcTileColor","LIGHT","DARK","map","rowIdx","colIdx","getPieceAt"],"mappings":";;;AAAA,OAAO,aAAP;AAEA,OAAOA,IAAP,IAAeC,SAAf,QAAgC,cAAhC;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,uBAA3C;AACA,SAASC,QAAT,QAAyC,0BAAzC;AAGA,SAASC,QAAT,QAAyB,OAAzB;;AAMA,MAAMC,gBAAgB,GAAG;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAzB;AACA,MAAMC,mBAAmB,GAAG;AAAED,EAAAA,IAAI,EAAE;AAAR,CAA5B;AAEA,eAAe,SAASE,KAAT,CACbC,KADa,EAKb;AAAA;;AAEA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCP,QAAQ,CAACC,gBAAD,CAAhD;AACA,QAAM,CAACO,eAAD,EAAkBC,kBAAlB,IAAwCT,QAAQ,CAACG,mBAAD,CAAtD;AACA;AACF;AACA;AACA;;AAEE,QAAMO,KAAK,GAAGC,iBAAiB,EAA/B;;AAEA,WAASA,iBAAT,GAA0C;AACxC,UAAMC,aAAiC,GAAGP,KAAK,CAACQ,WAAhD;AAEA,QAAID,aAAa,IAAIE,SAArB,EACE,OAAO,IAAIjB,WAAJ,EAAP;;AAEF,QAAI;AACF,YAAMkB,cAAc,GAAGjB,aAAa,CAACc,aAAD,CAApC;AACA,aAAOG,cAAP;AACD,KAHD,CAGE,OAAOC,CAAP,EAAe;AACf,YAAMC,GAAG,GAAGD,CAAZ;AACAC,MAAAA,GAAG,CAACC,OAAJ,GAAe,0BAAyBN,aAAa,CAACO,MAAO,OAAMP,aAAc,qBAAoBK,GAAG,CAACC,OAAQ,EAAjH;AACAb,MAAAA,KAAK,CAACe,OAAN,CAAcH,GAAd;AACD;;AACD,WAAO,IAAIpB,WAAJ,EAAP;AACD;;AAED,QAAMwB,eAAe,GAAG,CAACC,GAAD,EAAcC,GAAd,EAA2BC,KAA3B,KAAmD;AACzEC,IAAAA,OAAO,CAACC,GAAR,CAAa,cAAaH,GAAI,IAAGD,GAAI,MAAKE,KAAM,EAAhD;AACD,GAFD;;AAIA,QAAMG,aAAa,GAAG,CAACL,GAAD,EAAcC,GAAd,KAA8B,CAACA,GAAG,GAAGD,GAAP,IAAc,CAAd,KAAoB,CAApB,GAAwB1B,SAAS,CAACgC,KAAlC,GAA0ChC,SAAS,CAACiC,IAAxG;;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA,2BACE;AAAA,gBAEInB,KAFJ,aAEIA,KAFJ,uBAEIA,KAAK,CAAEA,KAAP,CAAaoB,GAAb,CAAiB,CAACR,GAAD,EAAMS,MAAN,KAAiB;AAChC,4BACE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,oBAEIT,GAAG,CAACQ,GAAJ,CAAQ,CAACN,KAAD,EAAQQ,MAAR,KAAmB;AACzB,gCACE,QAAC,IAAD;AACE,cAAA,QAAQ,EAAE,KADZ;AAEE,cAAA,WAAW,EAAE,KAFf;AAGE,cAAA,MAAM,EAAEA,MAHV;AAIE,cAAA,GAAG,EAAED,MAJP;AAKE,cAAA,WAAW,EAAE,MAAMV,eAAe,CAACU,MAAD,EAASC,MAAT,EAAiBR,KAAjB,CALpC;AAME,cAAA,KAAK,EAAEG,aAAa,CAACI,MAAD,EAASC,MAAT,CANtB;AAOE,cAAA,KAAK,EAAEtB,KAAK,CAACuB,UAAN,CAAiBlC,QAAQ,CAACiC,MAAD,EAASD,MAAT,CAAzB;AAPT;AAAA;AAAA;AAAA;AAAA,oBADF;AAWD,WAZD;AAFJ;AAAA;AAAA;AAAA;AAAA,gBADF;AAmBD,OApBD;AAFJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA8BD;;GArEuB3B,K;;KAAAA,K","sourcesContent":["import './board.css'\r\n\r\nimport Tile, { TileColor } from '../Tile/Tile';\r\nimport { BoardObject, stringToBoard } from '../../../domain/board'\r\nimport { Position, PositionObject } from '../../../domain/position'\r\nimport { BoardError } from '../../../domain/errors';\r\nimport { Piece } from '../../../domain/piece';\r\nimport { useState } from 'react';\r\n\r\ninterface TileWrapper {\r\n  tile: PositionObject | null\r\n}\r\n\r\nconst initSelectedTile = { tile: null }\r\nconst initHighlightedTile = { tile: null }\r\n\r\nexport default function Board(\r\n  props: {\r\n    boardString?: string,\r\n    onError: (error: BoardError) => void\r\n  }\r\n) {\r\n\r\n  const [selectedTile, setSelectedTile] = useState(initSelectedTile)\r\n  const [highlightedTile, setHighlightedTile] = useState(initHighlightedTile)\r\n  /** STORE STATE FOR CLICK_PHASE\r\n   * 1 - NOT_SELECTED\r\n   * 2 - SELECTED \r\n   * */\r\n\r\n  const board = getBoardFromProps()\r\n\r\n  function getBoardFromProps(): BoardObject {\r\n    const boardAsString: string | undefined = props.boardString\r\n\r\n    if (boardAsString == undefined)\r\n      return new BoardObject()\r\n\r\n    try {\r\n      const convertedBoard = stringToBoard(boardAsString)\r\n      return convertedBoard\r\n    } catch (e: any) {\r\n      const err = e as BoardError\r\n      err.message = `[DEBUG] Invalid Board: ${boardAsString.length} => ${boardAsString}\\nOriginal Error: ${err.message}`\r\n      props.onError(err)\r\n    }\r\n    return new BoardObject()\r\n  }\r\n\r\n  const handleTileClick = (row: number, col: number, piece: Piece | null) => {\r\n    console.log(`Clicked on ${col}:${row} | ${piece}`)\r\n  }\r\n\r\n  const calcTileColor = (row: number, col: number) => (col + row) % 2 === 0 ? TileColor.LIGHT : TileColor.DARK\r\n\r\n  return (\r\n    <div className=\"board\">\r\n      <div>\r\n        {\r\n          board?.board.map((row, rowIdx) => {\r\n            return (\r\n              <div className=\"board-row\">\r\n                {\r\n                  row.map((piece, colIdx) => {\r\n                    return (\r\n                      <Tile\r\n                        selected={false}\r\n                        highlighted={false}\r\n                        column={colIdx}\r\n                        row={rowIdx}\r\n                        onTileClick={() => handleTileClick(rowIdx, colIdx, piece)}\r\n                        color={calcTileColor(rowIdx, colIdx)}\r\n                        piece={board.getPieceAt(Position(colIdx, rowIdx))}\r\n                      />\r\n                    )\r\n                  })\r\n                }\r\n              </div>\r\n            )\r\n          }\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}