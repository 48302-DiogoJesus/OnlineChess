{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\jesus\\\\Desktop\\\\PG\\\\Personal\\\\1-Web\\\\TS\\\\OnlineChess\\\\chessbackend\\\\react-ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\jesus\\\\Desktop\\\\PG\\\\Personal\\\\1-Web\\\\TS\\\\OnlineChess\\\\chessbackend\\\\react-ui\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\jesus\\\\Desktop\\\\PG\\\\Personal\\\\1-Web\\\\TS\\\\OnlineChess\\\\chessbackend\\\\react-ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import'./OpenMPGame.css';import'../../../../global-css/switches.css';import{useRef,useState}from'react';import{useNavigate}from'react-router-dom';import Server from'../../../../server/server';import Alerts from'../../../../utils/Alerts/sa-alerts';import MainPageUtils from'../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OpenMPGame(){var navigate=useNavigate();var gameId_input=useRef();var opponent_input=useRef();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),publicGame=_useState2[0],setPublicGame=_useState2[1];function handleCreateGame(){return _handleCreateGame.apply(this,arguments);}function _handleCreateGame(){_handleCreateGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var gameIdValue,opponent_name,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:gameIdValue=validateGameID(true);if(!(gameIdValue==false)){_context.next=3;break;}return _context.abrupt(\"return\");case 3:opponent_name=publicGame?null:opponent_input.current.value;if(!(opponent_name!=null&&opponent_name.length==0)){_context.next=7;break;}Alerts.showNotification(\"Since you chose a private game you need to define an opponent\");return _context.abrupt(\"return\");case 7:_context.next=9;return Server.createGame(gameIdValue,publicGame,opponent_name);case 9:result=_context.sent;if(result.success)MainPageUtils.showGameJoinMessage(gameIdValue,navigate);case 11:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateGame.apply(this,arguments);}function handleJoinGame(){var gameIdValue=validateGameID(true);if(gameIdValue==false)return;navigate(\"/games/\".concat(gameIdValue));}function validateGameID(){var showError=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var gameIdValue=gameId_input.current.value;if(!(gameIdValue.length>=5&&gameIdValue.length<=20)){if(showError)Alerts.showNotification(\"Invalid Game ID. It must have between 5 and 20 characters\");return false;}return gameIdValue;}function handleInputChange(){validateGameID();}function togglePublic(){setPublicGame(!publicGame);}return/*#__PURE__*/_jsxs(\"div\",{className:\"open-game-inner-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"header\",children:\"Create / Join a Game\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"entry\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"key\",children:\"Game ID\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleInputChange,ref:gameId_input,className:\"game-id form-control\",placeholder:\"Game ID\",\"aria-label\":\"Game ID\",\"aria-describedby\":\"basic-addon1\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"entry\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"key\",children:\"Private\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"switch\",children:[/*#__PURE__*/_jsx(\"input\",{onClick:togglePublic,type:\"checkbox\"}),/*#__PURE__*/_jsx(\"span\",{className:\"slider round\"})]})})]}),!publicGame?/*#__PURE__*/_jsxs(\"div\",{className:\"entry\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"key\",children:\"Opponent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleInputChange,ref:opponent_input,className:\"game-id form-control\",placeholder:\"Opponent Username\",\"aria-label\":\"Game ID\",\"aria-describedby\":\"basic-addon1\"})})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"entry\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"open-game-btn\",onClick:handleCreateGame,children:\"CREATE\"}),publicGame?/*#__PURE__*/_jsx(\"button\",{className:\"open-game-btn\",onClick:handleJoinGame,children:\"JOIN\"}):null]})]});}","map":{"version":3,"sources":["C:/Users/jesus/Desktop/PG/Personal/1-Web/TS/OnlineChess/chessbackend/react-ui/src/pages/MainPage/components/OpenMPGame/OpenMPGame.tsx"],"names":["useRef","useState","useNavigate","Server","Alerts","MainPageUtils","OpenMPGame","navigate","gameId_input","opponent_input","publicGame","setPublicGame","handleCreateGame","gameIdValue","validateGameID","opponent_name","current","value","length","showNotification","createGame","result","success","showGameJoinMessage","handleJoinGame","showError","handleInputChange","togglePublic"],"mappings":"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","sourcesContent":["import './OpenMPGame.css'\r\nimport '../../../../global-css/switches.css'\r\n\r\nimport { useRef, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport Server, { ServerResponse } from '../../../../server/server'\r\nimport Alerts from '../../../../utils/Alerts/sa-alerts'\r\nimport { showGameJoinMessage } from '../../utils'\r\nimport MainPageUtils from '../../utils'\r\n\r\nexport default function OpenMPGame() {\r\n    const navigate = useNavigate()\r\n\r\n    const gameId_input: any = useRef()\r\n    const opponent_input: any = useRef()\r\n\r\n    const [publicGame, setPublicGame] = useState(true)\r\n\r\n    async function handleCreateGame() {\r\n        const gameIdValue = validateGameID(true)\r\n        if (gameIdValue == false) {\r\n            return\r\n        }\r\n\r\n        const opponent_name: string | null =\r\n            publicGame\r\n                ? null\r\n                : opponent_input.current.value\r\n\r\n        if (opponent_name != null && opponent_name.length == 0) {\r\n            Alerts.showNotification(\"Since you chose a private game you need to define an opponent\")\r\n            return\r\n        }\r\n\r\n        const result: ServerResponse = await Server.createGame(gameIdValue, publicGame, opponent_name)\r\n\r\n        if (result.success)\r\n            MainPageUtils.showGameJoinMessage(gameIdValue, navigate)\r\n    }\r\n\r\n    function handleJoinGame() {\r\n        const gameIdValue = validateGameID(true)\r\n        if (gameIdValue == false)\r\n            return\r\n        navigate(`/games/${gameIdValue}`)\r\n    }\r\n\r\n    function validateGameID(showError: boolean = false): false | string {\r\n        const gameIdValue = gameId_input.current.value\r\n        if (!(gameIdValue.length >= 5 && gameIdValue.length <= 20)) {\r\n            if (showError)\r\n                Alerts.showNotification(\"Invalid Game ID. It must have between 5 and 20 characters\")\r\n            return false\r\n        }\r\n        return gameIdValue\r\n    }\r\n\r\n    function handleInputChange() {\r\n        validateGameID()\r\n    }\r\n\r\n    function togglePublic() {\r\n        setPublicGame(!publicGame)\r\n    }\r\n\r\n    return (\r\n        <div className=\"open-game-inner-container\">\r\n            <h3 className=\"header\">Create / Join a Game</h3>\r\n\r\n            <div className=\"entry\">\r\n                <span className=\"key\">Game ID</span>\r\n                <span className=\"value\">\r\n                    <input onChange={handleInputChange} ref={gameId_input} className=\"game-id form-control\" placeholder=\"Game ID\" aria-label=\"Game ID\" aria-describedby=\"basic-addon1\" />\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"entry\">\r\n                <span className=\"key\">Private</span>\r\n                <span className=\"value\">\r\n                    <label className=\"switch\">\r\n                        <input onClick={togglePublic} type=\"checkbox\" />\r\n                        <span className=\"slider round\"></span>\r\n                    </label>\r\n                </span>\r\n            </div>\r\n            {\r\n                !publicGame ?\r\n                    <div className=\"entry\">\r\n                        <span className=\"key\">\r\n                            Opponent\r\n                        </span>\r\n                        <span className=\"value\">\r\n                            <input onChange={handleInputChange} ref={opponent_input} className=\"game-id form-control\" placeholder=\"Opponent Username\" aria-label=\"Game ID\" aria-describedby=\"basic-addon1\" />\r\n                        </span>\r\n                    </div>\r\n                    : null\r\n            }\r\n\r\n            <div className=\"entry\">\r\n                <button className=\"open-game-btn\" onClick={handleCreateGame}>\r\n                    CREATE\r\n                </button>\r\n                {\r\n                    publicGame ?\r\n                        <button className=\"open-game-btn\" onClick={handleJoinGame}>\r\n                            JOIN\r\n                        </button>\r\n                        : null\r\n                }\r\n            </div>\r\n        </div >\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}