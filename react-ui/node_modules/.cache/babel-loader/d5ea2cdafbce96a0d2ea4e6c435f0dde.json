{"ast":null,"code":"import Actions from './actions/action';\nimport { store as Store } from '../index';\nimport Server from '../server/server';\nexport function GetAppState() {\n  return Store.getState();\n}\n_c = GetAppState;\nexport function joinGame(game_id, callback) {\n  // Since we are joining a new game \n  Store.dispatch(Actions.leaveGame());\n  return new Promise((resolve, reject) => {\n    Store.dispatch(function (dispatch, getState) {\n      Server.getGame(game_id).then(response => {\n        // Game Exists\n        if (response.success) {\n          const gameObject = response.data;\n          dispatch(Actions.joinGame(gameObject));\n          resolve(response);\n          callback(true, gameObject, response);\n        } else {\n          callback(false, null, response);\n          resolve;\n        }\n      });\n    });\n  });\n}\nexport function login(username) {\n  Store.dispatch(Actions.doLogin(username));\n}\nexport function logout() {\n  Store.dispatch(Actions.clearState());\n}\nexport function leaveGame() {\n  Store.dispatch(Actions.leaveGame());\n}\nexport function clearState() {\n  Store.dispatch(Actions.clearState());\n}\nconst State = {\n  GetAppState,\n  joinGame,\n  login,\n  logout,\n  leaveGame\n};\nexport default State;\n\nvar _c;\n\n$RefreshReg$(_c, \"GetAppState\");","map":{"version":3,"sources":["C:/Users/jesus/Desktop/PG/Personal/1-Web/TS/OnlineChess/onlinechess/src/state/State.ts"],"names":["Actions","store","Store","Server","GetAppState","getState","joinGame","game_id","callback","dispatch","leaveGame","Promise","resolve","reject","getGame","then","response","success","gameObject","data","login","username","doLogin","logout","clearState","State"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,kBAApB;AACA,SAASC,KAAK,IAAIC,KAAlB,QAA+B,UAA/B;AACA,OAAOC,MAAP,MAAuC,kBAAvC;AAGA,OAAO,SAASC,WAAT,GAAiC;AACpC,SAAOF,KAAK,CAACG,QAAN,EAAP;AACH;KAFeD,W;AAIhB,OAAO,SAASE,QAAT,CAAkBC,OAAlB,EAAmCC,QAAnC,EAA8J;AACjK;AACAN,EAAAA,KAAK,CAACO,QAAN,CAAeT,OAAO,CAACU,SAAR,EAAf;AAEA,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCX,IAAAA,KAAK,CAACO,QAAN,CAAe,UAAUA,QAAV,EAAyBJ,QAAzB,EAAwC;AACnDF,MAAAA,MAAM,CAACW,OAAP,CAAeP,OAAf,EACKQ,IADL,CACWC,QAAD,IAA8B;AAChC;AACA,YAAIA,QAAQ,CAACC,OAAb,EAAsB;AAClB,gBAAMC,UAAU,GAAGF,QAAQ,CAACG,IAA5B;AACAV,UAAAA,QAAQ,CAACT,OAAO,CAACM,QAAR,CAAiBY,UAAjB,CAAD,CAAR;AACAN,UAAAA,OAAO,CAACI,QAAD,CAAP;AACAR,UAAAA,QAAQ,CAAC,IAAD,EAAOU,UAAP,EAAmBF,QAAnB,CAAR;AACH,SALD,MAKO;AACHR,UAAAA,QAAQ,CAAC,KAAD,EAAQ,IAAR,EAAcQ,QAAd,CAAR;AACAJ,UAAAA,OAAO;AACV;AACJ,OAZL;AAaH,KAdD;AAeH,GAhBM,CAAP;AAiBH;AAED,OAAO,SAASQ,KAAT,CAAeC,QAAf,EAAiC;AACpCnB,EAAAA,KAAK,CAACO,QAAN,CAAeT,OAAO,CAACsB,OAAR,CAAgBD,QAAhB,CAAf;AACH;AAED,OAAO,SAASE,MAAT,GAAkB;AACrBrB,EAAAA,KAAK,CAACO,QAAN,CAAeT,OAAO,CAACwB,UAAR,EAAf;AACH;AAED,OAAO,SAASd,SAAT,GAAqB;AACxBR,EAAAA,KAAK,CAACO,QAAN,CAAeT,OAAO,CAACU,SAAR,EAAf;AACH;AAED,OAAO,SAASc,UAAT,GAAsB;AACzBtB,EAAAA,KAAK,CAACO,QAAN,CAAeT,OAAO,CAACwB,UAAR,EAAf;AACH;AAED,MAAMC,KAAK,GAAG;AACVrB,EAAAA,WADU;AAEVE,EAAAA,QAFU;AAGVc,EAAAA,KAHU;AAIVG,EAAAA,MAJU;AAKVb,EAAAA;AALU,CAAd;AAQA,eAAee,KAAf","sourcesContent":["import Actions from './actions/action'\r\nimport { store as Store } from '../index'\r\nimport Server, { ServerResponse } from '../server/server'\r\nimport { AppState, RemoteGame } from './reducers/root'\r\n\r\nexport function GetAppState(): AppState {\r\n    return Store.getState()\r\n}\r\n\r\nexport function joinGame(game_id: string, callback: (success: boolean, game: RemoteGame | null, original_response: ServerResponse) => void): Promise<ServerResponse> {\r\n    // Since we are joining a new game \r\n    Store.dispatch(Actions.leaveGame())\r\n\r\n    return new Promise((resolve, reject) => {\r\n        Store.dispatch(function (dispatch: any, getState: any) {\r\n            Server.getGame(game_id)\r\n                .then((response: ServerResponse) => {\r\n                    // Game Exists\r\n                    if (response.success) {\r\n                        const gameObject = response.data as RemoteGame\r\n                        dispatch(Actions.joinGame(gameObject))\r\n                        resolve(response)\r\n                        callback(true, gameObject, response)\r\n                    } else {\r\n                        callback(false, null, response)\r\n                        resolve\r\n                    }\r\n                })\r\n        })\r\n    })\r\n}\r\n\r\nexport function login(username: string) {\r\n    Store.dispatch(Actions.doLogin(username))\r\n}\r\n\r\nexport function logout() {\r\n    Store.dispatch(Actions.clearState())\r\n}\r\n\r\nexport function leaveGame() {\r\n    Store.dispatch(Actions.leaveGame())\r\n}\r\n\r\nexport function clearState() {\r\n    Store.dispatch(Actions.clearState())\r\n}\r\n\r\nconst State = {\r\n    GetAppState,\r\n    joinGame,\r\n    login,\r\n    logout,\r\n    leaveGame\r\n}\r\n\r\nexport default State"]},"metadata":{},"sourceType":"module"}