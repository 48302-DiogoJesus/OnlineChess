{"ast":null,"code":"import { PieceColor } from '../../domain/piece';\nimport CONFIG from '../../server/config';\nimport Server from '../../server/server';\nexport const doLogin = username => {\n  return {\n    type: 'LOGIN',\n    payload: {\n      'username': username\n    }\n  };\n};\nexport const doLogout = () => {\n  // To remove the session cookie\n  Server.logout();\n  return {\n    type: 'LOGOUT',\n    payload: {}\n  };\n};\nexport const joinGame = (game_id, piecesColor, board, player_white, player_black) => {\n  console.log(\"Action GOT: \", game_id, piecesColor, board, player_white, player_black);\n  return {\n    type: 'JOIN_GAME',\n    payload: {\n      _id: game_id,\n      local_player_pieces: piecesColor,\n      board: board,\n      player_white: player_white,\n      player_black: player_black\n    }\n  };\n};\nexport function getRemoteGameData(game_id) {\n  return function (dispatch, getState) {\n    CONFIG.AXIOSINSTANCE.get(`/games?id=${game_id}`).then(res => {\n      if (res.status != 200) {\n        console.error(res.data);\n        return;\n      }\n\n      return res.data.data;\n    }).then(data => {\n      // ! PieceColor.WHITE IS HARDCODED, LATER CALCULATE IT FROM COMPARING THE STATE USERNAME WITH THE PLAYER_WHITE AND PLAYER_BLACK\n      // const username = (getState() as AppState).authentication.username\n      dispatch(joinGame(game_id, PieceColor.WHITE, data.board, data.player_white, data.player_black));\n    });\n  };\n}\nexport const leaveGame = () => {\n  return {\n    type: 'LEAVE_GAME',\n    payload: {}\n  };\n};","map":{"version":3,"sources":["C:/Users/jesus/Desktop/PG/Personal/1-Web/TS/OnlineChess/onlinechess/src/state/actions/action.ts"],"names":["PieceColor","CONFIG","Server","doLogin","username","type","payload","doLogout","logout","joinGame","game_id","piecesColor","board","player_white","player_black","console","log","_id","local_player_pieces","getRemoteGameData","dispatch","getState","AXIOSINSTANCE","get","then","res","status","error","data","WHITE","leaveGame"],"mappings":"AACA,SAASA,UAAT,QAA2B,oBAA3B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAOC,MAAP,MAAmB,qBAAnB;AAEA,OAAO,MAAMC,OAAO,GAAIC,QAAD,IAAsB;AACzC,SAAO;AACHC,IAAAA,IAAI,EAAE,OADH;AAEHC,IAAAA,OAAO,EAAE;AACL,kBAAYF;AADP;AAFN,GAAP;AAMH,CAPM;AASP,OAAO,MAAMG,QAAQ,GAAG,MAAM;AAC1B;AACAL,EAAAA,MAAM,CAACM,MAAP;AAEA,SAAO;AACHH,IAAAA,IAAI,EAAE,QADH;AAEHC,IAAAA,OAAO,EAAE;AAFN,GAAP;AAIH,CARM;AAUP,OAAO,MAAMG,QAAQ,GAAG,CACpBC,OADoB,EAEpBC,WAFoB,EAGpBC,KAHoB,EAIpBC,YAJoB,EAKpBC,YALoB,KAMnB;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BN,OAA5B,EAAqCC,WAArC,EAAkDC,KAAlD,EAAyDC,YAAzD,EAAuEC,YAAvE;AACA,SAAO;AACHT,IAAAA,IAAI,EAAE,WADH;AAEHC,IAAAA,OAAO,EAAE;AACLW,MAAAA,GAAG,EAAEP,OADA;AAELQ,MAAAA,mBAAmB,EAAEP,WAFhB;AAGLC,MAAAA,KAAK,EAAEA,KAHF;AAILC,MAAAA,YAAY,EAAEA,YAJT;AAKLC,MAAAA,YAAY,EAAEA;AALT;AAFN,GAAP;AAUH,CAlBM;AAoBP,OAAO,SAASK,iBAAT,CAA2BT,OAA3B,EAA4C;AAC/C,SAAO,UAAUU,QAAV,EAAyBC,QAAzB,EAAwC;AAC3CpB,IAAAA,MAAM,CAACqB,aAAP,CAAqBC,GAArB,CAA0B,aAAYb,OAAQ,EAA9C,EAAiDc,IAAjD,CAAsDC,GAAG,IAAI;AACzD,UAAIA,GAAG,CAACC,MAAJ,IAAc,GAAlB,EAAuB;AACnBX,QAAAA,OAAO,CAACY,KAAR,CAAcF,GAAG,CAACG,IAAlB;AACA;AACH;;AACD,aAAOH,GAAG,CAACG,IAAJ,CAASA,IAAhB;AACH,KAND,EAMGJ,IANH,CAMSI,IAAD,IAAU;AACd;AACA;AACAR,MAAAA,QAAQ,CAACX,QAAQ,CAACC,OAAD,EAAUV,UAAU,CAAC6B,KAArB,EAA4BD,IAAI,CAAChB,KAAjC,EAAwCgB,IAAI,CAACf,YAA7C,EAA2De,IAAI,CAACd,YAAhE,CAAT,CAAR;AACH,KAVD;AAWH,GAZD;AAaH;AAED,OAAO,MAAMgB,SAAS,GAAG,MAAM;AAC3B,SAAO;AACHzB,IAAAA,IAAI,EAAE,YADH;AAEHC,IAAAA,OAAO,EAAE;AAFN,GAAP;AAIH,CALM","sourcesContent":["import { BoardObject } from '../../domain/board'\r\nimport { PieceColor } from '../../domain/piece'\r\nimport CONFIG from '../../server/config'\r\nimport { AppState } from '../reducers/root'\r\nimport Server from '../../server/server'\r\n\r\nexport const doLogin = (username: string) => {\r\n    return {\r\n        type: 'LOGIN',\r\n        payload: {\r\n            'username': username\r\n        }\r\n    }\r\n}\r\n\r\nexport const doLogout = () => {\r\n    // To remove the session cookie\r\n    Server.logout()\r\n\r\n    return {\r\n        type: 'LOGOUT',\r\n        payload: {}\r\n    }\r\n}\r\n\r\nexport const joinGame = (\r\n    game_id: string,\r\n    piecesColor: PieceColor,\r\n    board: BoardObject,\r\n    player_white: PieceColor,\r\n    player_black: PieceColor\r\n) => {\r\n    console.log(\"Action GOT: \", game_id, piecesColor, board, player_white, player_black)\r\n    return {\r\n        type: 'JOIN_GAME',\r\n        payload: {\r\n            _id: game_id,\r\n            local_player_pieces: piecesColor,\r\n            board: board,\r\n            player_white: player_white,\r\n            player_black: player_black\r\n        }\r\n    }\r\n}\r\n\r\nexport function getRemoteGameData(game_id: string) {\r\n    return function (dispatch: any, getState: any) {\r\n        CONFIG.AXIOSINSTANCE.get(`/games?id=${game_id}`).then(res => {\r\n            if (res.status != 200) {\r\n                console.error(res.data)\r\n                return\r\n            }\r\n            return res.data.data\r\n        }).then((data) => {\r\n            // ! PieceColor.WHITE IS HARDCODED, LATER CALCULATE IT FROM COMPARING THE STATE USERNAME WITH THE PLAYER_WHITE AND PLAYER_BLACK\r\n            // const username = (getState() as AppState).authentication.username\r\n            dispatch(joinGame(game_id, PieceColor.WHITE, data.board, data.player_white, data.player_black))\r\n        })\r\n    }\r\n}\r\n\r\nexport const leaveGame = () => {\r\n    return {\r\n        type: 'LEAVE_GAME',\r\n        payload: {}\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}